sudo: required
dist: precise
language: cpp

matrix:
    include:
        -compiler: gcc
            addons:
                apt:
                    sources:
                        - ubuntu-toolchain-r-test
                    packages:
                        - g++-5
            env: COMPILER=g++-5
        -compiler: gcc
            addons:
                apt:
                    sources:
                        - ubuntu-toolchain-r-test
                    packages:
                        - g++-6
            env: COMPILER=g++-6
        -compiler: clang
            addons:
                apt:
                    sources:
                        - ubuntu-toolchain-r-test
                        - llvm-toolchain-precise-3.7
                    packages:
                        - clang-3.6
            env: COMPILER=clang++-3.6
        -compiler: clang
            addons:
                apt:
                    sources:
                        - ubuntu-toolchain-r-test
                        - llvm-toolchain-precise-3.7
                    packages:
                        - clang-3.7
            env: COMPILER=clang++-3.7

before_install:
    - sudo apt-get update -qq

script:
    - make clean && make test CXX=$COMPILER build=debug && ./test/bin/alignment && ./test/bin/arithmetic
    - make clean && make test CXX=$COMPILER build=opt1 && ./test/bin/alignment && ./test/bin/arithmetic
    - make clean && make test CXX=$COMPILER build=opt2 && ./test/bin/alignment && ./test/bin/arithmetic
    - make clean && make test CXX=$COMPILER build=opt3 && ./test/bin/alignment && ./test/bin/arithmetic
